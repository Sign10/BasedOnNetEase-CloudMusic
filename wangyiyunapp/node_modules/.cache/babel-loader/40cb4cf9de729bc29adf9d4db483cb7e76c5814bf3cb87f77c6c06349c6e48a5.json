{"ast":null,"code":"import \"core-js/modules/es.array.unshift.js\";\nimport { getSearchBanner } from '@/requests/api/home';\nexport default {\n  data() {\n    return {\n      keyWorldList: [],\n      searchKey: '',\n      searchList: []\n    };\n  },\n  mounted() {\n    this.keyWorldList = JSON.parse(localStorage.getItem('keyWorldList')) || [];\n  },\n  methods: {\n    async enterKey() {\n      if (this.searchKey !== '') {\n        this.keyWorldList.unshift(this.searchKey);\n        this.keyWorldList = [...new Set(this.keyWorldList)];\n        if (this.keyWorldList.length > 6) {\n          this.keyWorldList.pop();\n        }\n        localStorage.setItem('keyWorldList', JSON.stringify(this.keyWorldList));\n        let res = await getSearchBanner(this.searchKey);\n        this.searchList = res.data.result.songs;\n        this.searchKey = '';\n      } else {\n        alert('請輸入要搜索的內容');\n      }\n    },\n    deleteHistory() {\n      localStorage.removeItem('keyWorldList');\n      this.keyWorldList = [];\n    },\n    async searchHistory(item) {\n      let res = await getSearchBanner(item);\n      this.searchList = res.data.result.songs;\n    }\n  }\n};","map":{"version":3,"names":["getSearchBanner","data","keyWorldList","searchKey","searchList","mounted","JSON","parse","localStorage","getItem","methods","enterKey","unshift","Set","length","pop","setItem","stringify","res","result","songs","alert","deleteHistory","removeItem","searchHistory","item"],"sources":["D:\\桌面\\vue项目\\wangyiyunapp\\src\\views\\SearCh.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"searchTop\">\r\n            <svg class=\"icon\" aria-hidden=\"true\">\r\n                <use xlink:href=\"#icon-zuojiantou\"></use>\r\n            </svg>\r\n            <input type=\"text\" placeholder=\"結束バンド\" v-model=\"searchKey\" @keydown.enter=\"enterKey\">\r\n        </div>\r\n        <div class=\"searchHistory\">\r\n            <span class=\"searchSpan\">历史</span>\r\n            \r\n            <span v-for=\"item in keyWorldList\" :key='item' class=\"spanKey\" @click=\"searchHistory(item)\">\r\n                {{ item }}\r\n            </span>\r\n          \r\n            <svg class=\"icon\" aria-hidden=\"true\" @click=\"deleteHistory\">\r\n                <use xlink:href=\"#icon-shanchu\"></use>\r\n            </svg>\r\n        </div>\r\n        <div class=\"itemList\">\r\n            <!-- v-for要结合插值语法来使用 -->\r\n            <div class=\"item\" v-for=\"(item, i) in itemList\" :key=\"item\">\r\n                <div class=\"itemLeft\" @click=\"playMusic(i)\">\r\n                    <span class=\"leftSpan\">{{ i + 1 }}</span>\r\n                    <!-- 列表 -->\r\n                    \r\n                    <div>\r\n                        <p>{{ item.name }}</p>\r\n                        <!-- 歌曲名 -->\r\n                        <span v-for=\"(item1, idx) in item.ar\" :key=\"item1\" class=\"singer\">\r\n                            {{ item1.name }}&nbsp;\r\n                            {{ idx ===item.ar.length-1 ? \"\":'/' }}&nbsp;\r\n                            <!-- 歌手名 -->\r\n                        </span>\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"itemRight\">\r\n                    <svg class=\"iconbofang\" aria-hidden=\"true\" v-if='item.mv != 0'>\r\n                        <use xlink:href=\"#icon-shipin\"></use>\r\n                    </svg>\r\n                    <svg class=\"iconliebiao\" aria-hidden=\"true\">\r\n                        <use xlink:href=\"#icon-31liebiao\"></use>\r\n                    </svg>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport {getSearchBanner} from '@/requests/api/home'\r\nexport default {\r\n    data() {\r\n        return {\r\n            keyWorldList: [],\r\n            searchKey: '',\r\n            searchList:[]\r\n\r\n        }\r\n    },\r\n    mounted(){\r\n        this.keyWorldList=JSON.parse(localStorage.getItem('keyWorldList') )  || []\r\n\r\n\r\n\r\n    },\r\n    methods: {\r\n        async enterKey() {\r\n            if(this.searchKey !==''){\r\n            this.keyWorldList.unshift(this.searchKey);\r\n            this.keyWorldList=[...new Set(this.keyWorldList)];\r\n            \r\n            if(this.keyWorldList.length>6){\r\n                this.keyWorldList.pop()\r\n            }\r\n\r\n            localStorage.setItem('keyWorldList',JSON.stringify(this.keyWorldList))\r\n            let res=await getSearchBanner(this.searchKey)\r\n            this.searchList=res.data.result.songs\r\n            \r\n            this.searchKey='';\r\n            }else{\r\n                alert('請輸入要搜索的內容')\r\n            }  \r\n        },\r\n        deleteHistory(){\r\n            localStorage.removeItem('keyWorldList');\r\n            this.keyWorldList=[];\r\n        },\r\n       async searchHistory(item){\r\n            let res=await getSearchBanner(item)\r\n            this.searchList=res.data.result.songs\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.searchTop {\r\n    width: 100%;\r\n    height: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    input {\r\n        margin-left: .2rem;\r\n        border: none;\r\n        border-bottom: 1px solid #999;\r\n        width: 90%;\r\n        padding: .1rem;\r\n    }\r\n}\r\n\r\n\r\n.searchHistory {\r\n    width: 100%;\r\n    padding: .2rem;\r\n    position: relative;\r\n   \r\n    .searchSpan {\r\n        font-weight: 700;\r\n    }\r\n\r\n\r\n    .spanKey {\r\n        padding: .1rem .2rem;\r\n        background-color: rgb(185, 169, 169);\r\n        border-radius: .4rem;\r\n        margin: .1rem .2rem;\r\n       display: inline-block;\r\n    }\r\n\r\n\r\n    .icon{\r\n        width: .45rem;\r\n        height: .45rem;\r\n        position: absolute;\r\n        right: .2rem;\r\n    }\r\n\r\n}\r\n</style>"],"mappings":";AAsDA,SAAQA,eAAe,QAAO,qBAAoB;AAClD,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAC;IAEf;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAE;IACL,IAAI,CAACH,YAAY,GAACI,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAE,IAAM,EAAC;EAI7E,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,QAAQA,CAAA,EAAG;MACb,IAAG,IAAI,CAACR,SAAQ,KAAK,EAAE,EAAC;QACxB,IAAI,CAACD,YAAY,CAACU,OAAO,CAAC,IAAI,CAACT,SAAS,CAAC;QACzC,IAAI,CAACD,YAAY,GAAC,CAAC,GAAG,IAAIW,GAAG,CAAC,IAAI,CAACX,YAAY,CAAC,CAAC;QAEjD,IAAG,IAAI,CAACA,YAAY,CAACY,MAAM,GAAC,CAAC,EAAC;UAC1B,IAAI,CAACZ,YAAY,CAACa,GAAG,EAAC;QAC1B;QAEAP,YAAY,CAACQ,OAAO,CAAC,cAAc,EAACV,IAAI,CAACW,SAAS,CAAC,IAAI,CAACf,YAAY,CAAC;QACrE,IAAIgB,GAAG,GAAC,MAAMlB,eAAe,CAAC,IAAI,CAACG,SAAS;QAC5C,IAAI,CAACC,UAAU,GAACc,GAAG,CAACjB,IAAI,CAACkB,MAAM,CAACC,KAAI;QAEpC,IAAI,CAACjB,SAAS,GAAC,EAAE;MACjB,CAAC,MAAI;QACDkB,KAAK,CAAC,WAAW;MACrB;IACJ,CAAC;IACDC,aAAaA,CAAA,EAAE;MACXd,YAAY,CAACe,UAAU,CAAC,cAAc,CAAC;MACvC,IAAI,CAACrB,YAAY,GAAC,EAAE;IACxB,CAAC;IACF,MAAMsB,aAAaA,CAACC,IAAI,EAAC;MACpB,IAAIP,GAAG,GAAC,MAAMlB,eAAe,CAACyB,IAAI;MAClC,IAAI,CAACrB,UAAU,GAACc,GAAG,CAACjB,IAAI,CAACkB,MAAM,CAACC,KAAI;IACxC;EAEJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}